<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Registration Form</title>
</head>
<body>
<section>
	<br><br><br>
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-6">
				<div class="card">
					<div class="card-body border border-dark">
						<!-- success message -->
						<div th:if="${param.success}">
							<div class="alert alert-info">You've successfully registered to our Inventory Management System!</div>
						</div>
						<!-- error message -->
						<div th:if="${param.error}">
							<div class="alert alert-danger">Email already exists!</div>
						</div>

						<h1 class="text-center">Registration</h1>

						<form th:action="@{/registration}" method="post" th:object="${user}">
							<div class="form-group">
								<label class="control-label" for="firstName">First Name</label>
								<input id="firstName" class="form-control" th:field="*{firstName}" required autofocus="autofocus">
							</div>

							<div class="form-group">
								<label class="control-label" for="lastName">Last Name</label>
								<input id="lastName" class="form-control" th:field="*{lastName}" required autofocus="autofocus">
							</div>

							<div class="form-group">
								<label class="control-label" for="email">Email</label>
								<input id="email" class="form-control" type="email" th:field="*{email}" required autofocus="autofocus">
								<small id="email-error" class="text-danger"></small>
							</div>


							<div class="mt-3">
								<div class="form-group">
									<label class="control-label">Password</label>
									<div class="input-group">
										<input id="password" class="form-control" type="password" name="password" required autofocus="autofocus">
										<div class="input-group-append">
											<span class="input-group-text">
												<i class="fas fa-eye" style="cursor: pointer; font-size: 18px; height: 30px;" onclick="togglePasswordVisibility('password')"></i>
											</span>
										</div>
									</div>
								</div>
								<div id="password-strength" class="mt-2"></div>
							</div>

							<div class="mt-3">
								<div class="form-group">
									<label class="control-label">Confirm Password</label>
									<div class="input-group">
										<input id="confirmPassword" class="form-control" type="password" name="confirm_password" required autofocus="autofocus">
										<div class="input-group-append">
											<span class="input-group-text">
												<i class="fas fa-eye" style="cursor: pointer; font-size: 18px; height: 30px;" onclick="togglePasswordVisibility('confirmPassword')"></i>
											</span>
										</div>
									</div>
								</div>
								<div id="password-match-message" class="mt-2"></div>
							</div>

							<div class="mt-3">
								<div class="input-group">
									<div class="input-group-prepend">
										<label class="input-group-text" for="inputGroupSelect03">Role</label>
									</div>
									<select class="custom-select" id="inputGroupSelect03" name="role" required>
										<option value="">Choose...</option>
										<option value="Admin">Admin</option>
										<option value="Customer">USER</option>
									</select>
								</div>
							</div>

							<div class="mt-3">
								<!-- Button trigger modal -->

								<label class="form-check-label"  data-toggle="modal" data-target="#exampleModalLong">
									<input type="checkbox" required>
									I accept the <a href="#">Terms of Use</a> &amp; <a href="#">Privacy Policy</a>
								</label>

								<!-- Modal -->
								<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
									<div class="modal-dialog" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLongTitle"> Terms And Conditions</h5>
												<button type="button" class="close" data-dismiss="modal" aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body">
												Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

												Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

												Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

												Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

												Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

												Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

												Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

												Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

												Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

												Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

												Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

												Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

												Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

												Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

												Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

												Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

												Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

												Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
											</div>
										</div>
									</div>
								</div>
							</div>
							<br>
							<div class="form-group">
								<button type="submit" class="btn btn-primary">Register</button><br><br>
								<span>Already registered? <a href="/" th:href="@{/login}">Login here</a></span>
							</div>
						</form>
						<hr>
					</div>
				</div>
			</div>
		</div>
		<hr>
		<p class="text-center">Have A Good Day....</p>
	</div>

	<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/boots
	trap.min.js"></script>
	<script>
		function togglePasswordVisibility(inputId) {
			var x = document.getElementById(inputId);
			var icon = x.parentNode.querySelector(".toggle-password i");
			if (x.type === "password") {
				x.type = "text";
				icon.classList.remove("fa-eye");
				icon.classList.add("fa-eye-slash");
			} else {
				x.type = "password";
				icon.classList.remove("fa-eye-slash");
				icon.classList.add("fa-eye");
			}
		}

		function checkPasswordStrength() {
			var password = $("#password").val();
			var strength = 0;

			if (password.match(/[a-z]+/)) {
				strength += 1;
			}

			if (password.match(/[A-Z]+/)) {
				strength += 1;
			}

			if (password.match(/[0-9]+/)) {
				strength += 1;
			}

			if (password.match(/[$@#&!]+/)) {
				strength += 1;
			}

			if (password.length >= 8) {
				strength += 1;
			}

			var strengthText = '';
			switch (strength) {
				case 0:
					strengthText = 'Weak';
					break;
				case 1:
					strengthText = 'Weak';
					break;
				case 2:
					strengthText = 'Moderate';
					break;
				case 3:
					strengthText = 'Strong';
					break;
				case 4:
					strengthText = 'Very Strong';
					break;
				case 5:
					strengthText = 'Excellent';
					break;
				default:
					strengthText = '';
			}

			$("#password-strength").html('Password Strength: ' + strengthText).css('color', 'green');
			if (strength < 3) {
				$("#password-strength").css('color', 'red');
			}
		}

		$(document).ready(function () {
			$("#password").on("keyup", function () {
				checkPasswordStrength();
			});

			$("#confirmPassword").on("keyup", function () {
				var password = $("#password").val();
				var confirmPassword = $("#confirmPassword").val();
				var matchMessage = $("#password-match-message");

				if (password !== "" && confirmPassword !== "") {
					if (password !== confirmPassword) {
						matchMessage.html("Password does not match!").css("color", "red");
					} else {
						matchMessage.html("Password matches.").css("color", "green");
					}
				} else {
					matchMessage.empty();
				}
			});
		});

		function validateEmail(email) {
			const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			return emailRegex.test(email);
		}

		$(document).ready(function () {
			$("#email").on("keyup", function () {
				const email = $(this).val();
				const emailError = $("#email-error");

				if (validateEmail(email)) {
					emailError.text("");
				} else {
					emailError.text("Invalid email format");
				}
			});

		});

	</script>

</section>
</body>
</html>
